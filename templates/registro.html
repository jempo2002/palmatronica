<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro - Palmatronica</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/registro.css') }}">
  <script src="{{ url_for('static', filename='js/registro.js') }}" defer></script>
</head>
<body>
  <div class="login-container glass-container">
    <!-- Flash messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flashes">
          {% for msg in messages %}
            <li class="flash">{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Error por número de identificación repetido -->
    {% if error_id %}
      <p class="error">{{ error_id }}</p>
    {% endif %}

    <form class="login-form" action="{{ url_for('registrarse') }}" method="post">
      <h1>Crear cuenta</h1>

      <!-- Errores de validación -->
      {% if error_email %}
        <p class="error">{{ error_email }}</p>
      {% endif %}
      {% if error_pwd %}
        <p class="error">{{ error_pwd }}</p>
      {% endif %}

      <div class="login-input">
        <label for="nombre" class="sr-only">Nombre</label>
        <input
          type="text"
          id="nombre"
          name="nombre"
          placeholder="Nombre"
          maxlength="32"
          minlength="4"
          pattern="[a-zA-Z]{4,32}"
          title="El nombre debe tener entre 4 y 32 caracteres."
          required
        >
      </div>

      <div class="login-input">
        <label for="apellido" class="sr-only">Apellido</label>
        <input
          type="text"
          id="apellido"
          name="apellido"
          placeholder="Apellido"
          maxlength="32"
          minlength="4"
          pattern="[a-zA-Z ]{4,32}"
          title="El apellido debe tener entre 4 y 32 caracteres"
          required
        >
      </div>

      <div class="login-input">
        <label for="identificacion" class="sr-only">Número de identificación</label>
        <input
          type="number"
          id="identificacion"
          name="identificacion"
          placeholder="Número de identificación"
          inputmode="numeric"
          min="1"
          required
        >
      </div>

      <div class="login-input">
        <label for="correo" class="sr-only">Correo electrónico</label>
        <input
          type="email"
          id="correo"
          name="correo"
          inputmode="email"
          placeholder="Ingresa tu correo electrónico"
          maxlength="64"
          minlength="7"
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
          title="Ingresa un correo válido."
          required
        >
      </div>

      <div class="login-input">
        <label for="telefono" class="sr-only">Teléfono</label>
        <input
          type="tel"
          id="telefono"
          name="telefono"
          placeholder="Ingresa tu número telefónico"
          pattern="^\d{10}$"
          minlength="10"
          maxlength="10"
          inputmode="numeric"
          title="Ingresa un número de teléfono de 10 dígitos."
          required
        >
      </div>

      <div class="login-input">
        <label for="direccion" class="sr-only">Dirección</label>
        <input
          type="text"
          id="direccion"
          name="direccion"
          placeholder="Ingresa tu Dirección"
          minlength="5"
          maxlength="32"
          title="La dirección debe tener entre 5 y 32 caracteres."
          required
        >
      </div>

      <div class="login-input">
        <label for="palabra_cliente" class="sr-only">Contraseña</label>
        <input
          type="password"
          id="palabra_cliente"
          name="palabra_cliente"
          placeholder="Ingresa tu contraseña"
          maxlength="16"
          minlength="8"
          pattern="[a-zA-Z0-9]{8,16}"
          title="La contraseña debe tener entre 8 y 16 caracteres alfanuméricos."
          required
        >
      </div>

      <div class="login-input">
        <label for="password_cliente_conf" class="sr-only">Confirma tu contraseña</label>
        <input
          type="password"
          id="password_cliente_conf"
          name="password_cliente_conf"
          placeholder="Confirma tu contraseña"
          maxlength="16"
          minlength="8"
          required
        >
      </div>

      <button type="submit">Registrarse</button>

      <a href="{{ url_for('index') }}" class="login-link">
        ¿Ya tienes cuenta? <strong>Inicia sesión</strong>
      </a>
    </form>
  </div>
</body>
</html>
